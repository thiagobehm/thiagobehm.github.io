"use strict";!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery||Zepto)}(function(t){var e=function(e,i,n){e=t(e);var a,s=this,o=e.val();i="function"==typeof i?i(e.val(),void 0,e,n):i;var r={invalid:[],getCaret:function(){try{var t,i=0,n=e.get(0),s=document.selection,o=n.selectionStart;return s&&-1===navigator.appVersion.indexOf("MSIE 10")?(t=s.createRange(),t.moveStart("character",e.is("input")?-e.val().length:-e.text().length),i=t.text.length):(o||"0"===o)&&(i=o),i}catch(a){}},setCaret:function(t){try{if(e.is(":focus")){var i,n=e.get(0);n.setSelectionRange?n.setSelectionRange(t,t):n.createTextRange&&(i=n.createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select())}}catch(s){}},events:function(){e.on("input.mask keyup.mask",r.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}).on("change.mask",function(){e.data("changed",!0)}).on("blur.mask",function(){o===e.val()||e.data("changed")||e.triggerHandler("change"),e.data("changed",!1)}).on("blur.mask",function(){o=e.val()}).on("focus.mask",function(e){n.selectOnFocus===!0&&t(e.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!a.test(r.val())&&r.val("")})},getRegexMask:function(){for(var e,n,o,a,r,l,t=[],h=0;h<i.length;h++)e=s.translation[i.charAt(h)],e?(n=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),o=e.optional,a=e.recursive,a?(t.push(i.charAt(h)),r={digit:i.charAt(h),pattern:n}):t.push(o||a?n+"?":n)):t.push(i.charAt(h).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return l=t.join(""),r&&(l=l.replace(new RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(new RegExp(r.digit,"g"),r.pattern)),new RegExp(l)},destroyEvents:function(){e.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(t){var s,i=e.is("input"),n=i?"val":"text";return arguments.length>0?(e[n]()!==t&&e[n](t),s=e):s=e[n](),s},getMCharsBeforeCount:function(t,e){for(var n=0,o=0,a=i.length;a>o&&t>o;o++)s.translation[i.charAt(o)]||(t=e?t+1:t,n++);return n},caretPos:function(t,e,n,o){var a=s.translation[i.charAt(Math.min(t-1,i.length-1))];return a?Math.min(t+n-e-o,n):r.caretPos(t+1,e,n,o)},behaviour:function(e){e=e||window.event,r.invalid=[];var i=e.keyCode||e.which;if(-1===t.inArray(i,s.byPassKeys)){var n=r.getCaret(),o=r.val(),a=o.length,l=a>n,h=r.getMasked(),f=h.length,c=r.getMCharsBeforeCount(f-1)-r.getMCharsBeforeCount(a-1);return r.val(h),!l||65===i&&e.ctrlKey||(8!==i&&46!==i&&(n=r.caretPos(n,a,f,c)),r.setCaret(n)),r.callbacks(e)}},getMasked:function(t){var u,v,e=[],o=r.val(),a=0,l=i.length,h=0,f=o.length,c=1,d="push",p=-1;for(n.reverse?(d="unshift",c=-1,u=0,a=l-1,h=f-1,v=function(){return a>-1&&h>-1}):(u=l-1,v=function(){return l>a&&f>h});v();){var g=i.charAt(a),m=o.charAt(h),y=s.translation[g];y?(m.match(y.pattern)?(e[d](m),y.recursive&&(-1===p?p=a:a===u&&(a=p-c),u===p&&(a-=c)),a+=c):y.optional?(a+=c,h-=c):y.fallback?(e[d](y.fallback),a+=c,h-=c):r.invalid.push({p:h,v:m,e:y.pattern}),h+=c):(t||e[d](g),m===g&&(h+=c),a+=c)}var b=i.charAt(u);return l!==f+1||s.translation[b]||e.push(b),e.join("")},callbacks:function(t){var s=r.val(),a=s!==o,l=[s,t,e,n],h=function(t,e,i){"function"==typeof n[t]&&e&&n[t].apply(this,i)};h("onChange",a===!0,l),h("onKeyPress",a===!0,l),h("onComplete",s.length===i.length,l),h("onInvalid",r.invalid.length>0,[s,t,e,r.invalid,n])}};s.mask=i,s.options=n,s.remove=function(){var t=r.getCaret();return r.destroyEvents(),r.val(s.getCleanVal()),r.setCaret(t-r.getMCharsBeforeCount(t)),e},s.getCleanVal=function(){return r.getMasked(!0)},s.init=function(i){if(i=i||!1,n=n||{},s.byPassKeys=t.jMaskGlobals.byPassKeys,s.translation=t.jMaskGlobals.translation,s.translation=t.extend({},s.translation,n.translation),s=t.extend(!0,{},s,n),a=r.getRegexMask(),i===!1){n.placeholder&&e.attr("placeholder",n.placeholder),"oninput"in t("input")[0]==!1&&"on"===e.attr("autocomplete")&&e.attr("autocomplete","off"),r.destroyEvents(),r.events();var o=r.getCaret();r.val(r.getMasked()),r.setCaret(o+r.getMCharsBeforeCount(o,!0))}else r.events(),r.val(r.getMasked())},s.init(!e.is("input"))};t.maskWatchers={};var i=function(){var i=t(this),s={},o="data-mask-",a=i.attr("data-mask");return i.attr(o+"reverse")&&(s.reverse=!0),i.attr(o+"clearifnotmatch")&&(s.clearIfNotMatch=!0),"true"===i.attr(o+"selectonfocus")&&(s.selectOnFocus=!0),n(i,a,s)?i.data("mask",new e(this,a,s)):void 0},n=function(e,i,n){n=n||{};var s=t(e).data("mask"),o=JSON.stringify,a=t(e).val()||t(e).text();try{return"function"==typeof i&&(i=i(a)),"object"!=typeof s||o(s.options)!==o(n)||s.mask!==i}catch(r){}};t.fn.mask=function(i,s){s=s||{};var o=this.selector,a=t.jMaskGlobals,r=t.jMaskGlobals.watchInterval,l=function(){return n(this,i,s)?t(this).data("mask",new e(this,i,s)):void 0};return t(this).each(l),o&&""!==o&&a.watchInputs&&(clearInterval(t.maskWatchers[o]),t.maskWatchers[o]=setInterval(function(){t(document).find(o).each(l)},r)),this},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each(function(){var e=t(this).data("mask");e&&e.remove().removeData("mask")})},t.fn.cleanVal=function(){return this.data("mask").getCleanVal()},t.applyDataMask=function(e){e=e||t.jMaskGlobals.maskElements;var n=e instanceof t?e:t(e);n.filter(t.jMaskGlobals.dataMaskAttr).each(i)};var s={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};t.jMaskGlobals=t.jMaskGlobals||{},s=t.jMaskGlobals=t.extend(!0,{},s,t.jMaskGlobals),s.dataMask&&t.applyDataMask(),setInterval(function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()},s.watchInterval)});